<!-- include summernote css/js-->
<link href="<?php echo $cms->getThemePath(); ?>/summernote/summernote.css" rel="stylesheet">
<script src="<?php echo $cms->getThemePath(); ?>/summernote/summernote.min.js"></script>

<script>
$(document).ready(function() {
    $('#summernote').summernote({
        height: 300,
        focus: true
    });
});
</script>

<style>
    .well-controls {
        display: block;
        padding: 5px;
        margin-bottom: 5px;
    }
    .div-scroll {
        height: 150px;
        overflow-y: scroll;
    }
    .note-editor .btn {
        height: 30px;
    }
</style>

<?php

$returnData = $cms->getFormResponseData('data');

$id = null;
$title = $returnData['setTitle'];
$content = $returnData['setContent'];
$catId = $returnData['setCategory'];
$formTitle = 'Add new post';

if ($cms->getRoute('adminPostAction') == 'edit') {

    $formTitle = 'Edit post';

    $cms->setContent('post')->alias($cms->getRoute('alias'));

    foreach ($cms->getContent() as $post) {
        $id = $post->getId();
        $catId = $post->getCategoryId();
        $title = $post->getTitle();
        $content = $post->getContent();
    }

}

?>

<div class="container-fluid">

    <h2><?php echo $formTitle; ?></h2>

    <form method="post" action="<?php echo $cms->getAdminAdress(); ?>/post/form">

        <input type="hidden" name="id" value="<?php echo $id; ?>">

        <div class="well well-controls input-group">
            <button type="submit" class="btn btn-success" name="public" value="1">Public</button>
            <button type="submit" class="btn btn-primary" name="public" value="0">Save</button>
            <button type="submit" class="btn btn-default">View</button>
        </div>

        <div class="form-group" style="margin-bottom: 5px;">
            <input type="text" name="title" value="<?php echo $title; ?>" class="form-control input-lg" placeholder="Title">
        </div>

        <div class="form-group">
            <textarea name="content" id="summernote"><?php echo $content; ?></textarea>
        </div>

        <div class="row">
            <div class="col-sm-4">

                <div class="panel panel-default">
                    <div class="panel-heading">Chose category:</div>
                    <div class="panel-body div-scroll">

                    <?php 
                    $cms->setContent('category')->force();
                    foreach ($cms->getContent() as $cat) :
                    ?>

                        <div class="radio">
                            <label style="width:100%;">
                                <input type="radio" name="categoryId" value="<?php echo $cat->getId(); ?>"
                                <?php if ($catId == $cat->getId()) echo 'checked'; ?>>
                                <?php echo $cat->getTitle(); ?>
                            </label>
                        </div>

                    <?php endforeach; ?>

                    </div>
                </div>

            </div>
        </div>

    </form>

</div>
